{% extends 'base.html' %}
{% block title %}User Signup{% endblock %}
{% block body_class %}auth-body{% endblock %}
{% block navbar %}{% endblock %}
{% block styles %}<link href="{{ url_for('static', filename='css/auth.css') }}" rel="stylesheet">{% endblock %}
{% block content %}
<div class="auth-wrap">
  <div class="text-center mb-3">
    <span class="brand-pill">✨ Create account</span>
    <h2 class="mt-2">Join the EV Stations community</h2>
    <p class="text-muted">Sign up to personalize your browsing experience</p>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card auth-card-elevated">
        <div class="card-body">
          <form method="post" onsubmit="return validatePasswords(event)">
            <div class="mb-3">
              <label class="form-label">Name</label>
              <input class="form-control form-control-lg" type="text" name="name" placeholder="Your full name" value="{{ name|default('') }}" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input class="form-control form-control-lg" type="email" name="email" placeholder="you@example.com" value="{{ email|default('') }}" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Password</label>
              <input class="form-control form-control-lg" type="password" name="password" placeholder="Choose a password (min 6 chars)" minlength="6" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Confirm password</label>
              <input class="form-control form-control-lg" type="password" name="password_confirm" placeholder="Re-enter your password" required>
              <div id="pwdHelp" class="form-text d-none text-danger">Passwords do not match.</div>
            </div>
            <button class="btn btn-primary btn-lg w-100" type="submit">Create account</button>
            <div class="d-flex justify-content-between mt-2 small">
              <span class="text-muted">Already have an account?</span>
              <a class="text-decoration-none" href="{{ url_for('main.user_login') }}">Log in →</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function validatePasswords(e){
  const form = e.target;
  const p1 = form.password.value;
  const p2 = form.password_confirm.value;
  const help = document.getElementById('pwdHelp');
  if(p1 !== p2){
    e.preventDefault();
    if(help){ help.classList.remove('d-none'); }
    form.password_confirm.focus();
    return false;
  }
  if(help){ help.classList.add('d-none'); }
  return true;
}
</script>
{% endblock %}
