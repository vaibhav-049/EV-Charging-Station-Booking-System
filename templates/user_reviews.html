{% extends 'base.html' %}
{% block title %}My Reviews{% endblock %}
{% block styles %}<link href="{{ url_for('static', filename='css/index.css') }}" rel="stylesheet">{% endblock %}
{% block content %}
<h3><i class="bi bi-star-fill me-2"></i>My Reviews</h3>

<div class="card">
  <div class="card-header">
    <i class="bi bi-chat-left-text-fill me-2"></i>All Your Reviews
  </div>
  <div class="card-body">
    {% if reviews %}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Station</th>
            <th>Rating</th>
            <th>Review</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          {% for review in reviews %}
          <tr>
            <td>
              <a href="{{ url_for('main.station_detail', station_id=review.station_id) }}">
                {{ review.station_name or review.station_id }}
              </a>
            </td>
            <td>
              <span class="text-warning">
                {% for i in range(review.rating) %}★{% endfor %}
                {% for i in range(5 - review.rating) %}☆{% endfor %}
              </span>
              <span class="text-muted">{{ review.rating }}/5</span>
            </td>
            <td>{{ review.review_text or '(No comment)' }}</td>
            <td><small class="text-muted">{{ review.created_at }}</small></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="mt-3">
      <p class="text-muted">
        <i class="bi bi-info-circle me-2"></i>
        Total Reviews: <strong>{{ reviews|length }}</strong>
      </p>
    </div>
    {% else %}
    <div class="alert alert-info">
      <i class="bi bi-info-circle me-2"></i>
      You haven't written any reviews yet. Browse stations and share your experience!
    </div>
    {% endif %}
  </div>
</div>

<div class="mt-3">
  <a href="{{ url_for('main.index') }}" class="btn btn-primary">
    <i class="bi bi-ev-station-fill me-2"></i>Browse Stations
  </a>
</div>
{% endblock %}
